%%% This file contains definitions of various useful macros and environments %%%
%%% Please add more macros here instead of cluttering other files with them. %%%

%%% Minor tweaks of style

% These macros employ a little dirty trick to convince LaTeX to typeset
% chapter headings sanely, without lots of empty space above them.
% Feel free to ignore.
\makeatletter
\def\@makechapterhead#1{
  {\parindent \z@ \raggedright \normalfont
   \Huge\bfseries \thechapter. #1
   \par\nobreak
   \vskip 20\p@
}}
\def\@makeschapterhead#1{
  {\parindent \z@ \raggedright \normalfont
   \Huge\bfseries #1
   \par\nobreak
   \vskip 20\p@
}}
\makeatother

% lettrine settings
\LettrineRealHeighttrue
\setcounter{DefaultLines}{2}
\setcounter{DefaultDepth}{1}
\renewcommand{\DefaultLoversize}{0.15}
\renewcommand{\DefaultLraise}{-0.11}

\newfontface\EBLettrineFrontFont{EBGaramond-InitialsF2}%
  [Path=./eb-garamond/, Extension=.otf]
\newfontface\EBLettrineBackFont{EBGaramond-InitialsF1}%
  [Path=./eb-garamond/, Extension=.otf]
\newcommand{\EBLettrineBackColor}{%
  \ifdefined\colourflag DodgerBlue2\else black\fi}
\newcommand{\EBLettrineFrontColor}{%
  \ifdefined\colourflag darkgray\else black\fi}
\newcommand{\coloredlettrine}[3][]{%
\renewcommand{\LettrineFontHook}{\EBLettrineBackFont}%
\lettrine[#1]{%
\rlap{\color{\EBLettrineBackColor} #2}%
     {\EBLettrineFrontFont\color{\EBLettrineFrontColor} #2}}{#3}%
}

% This macro defines a chapter, which is not numbered, but is included
% in the table of contents.
\newcommand{\chapwithtoc}[1]{
\chapter*{#1}
\addcontentsline{toc}{chapter}{#1}
}

\newcommand{\sectionwithtoc}[1]{
  \section*{#1}
  \addcontentsline{toc}{section}{#1}
}

% Draw black "slugs" whenever a line overflows, so that we can spot it easily.
\overfullrule=1mm

% Number everything consecutively
\declaretheorem[numberwithin=chapter]{theorem}
\declaretheorem[numberlike=theorem]{conjecture}
\declaretheorem[numberlike=theorem]{proposition}
\declaretheorem[numberlike=theorem]{lemma}
\declaretheorem[numberlike=theorem]{corollary}
\declaretheorem[numberlike=theorem]{example}
\declaretheorem[numberlike=theorem,style=definition]{definition}
\declaretheorem[numberlike=theorem]{remark}

% Default label style for enumerate is (a)
\setlist[enumerate]{label=(\alph*)}

% Capitalised words in references
\renewcommand{\chapterautorefname}{Chapter}
\renewcommand{\definitionautorefname}{Definition}

\newcommand{\lc}{\mbox{λ-calculus}\xspace}
\newcommand{\lt}{\mbox{λ-term}\xspace}
\newcommand{\lts}{\mbox{λ-terms}\xspace}
\newcommand{\fv}[1]{\ensuremath{\mathrm{FV}(#1)}\xspace}
\newcommand{\ir}[1]{\mbox{\textsc{#1}}\xspace}
\newcommand{\is}[1]{\overset{#1}:}
\newcommand{\defeq}{\overset{\textrm{def}}{=}}

%% Types
% Constructors
\newcommand{\lam}[2]{\ensuremath{\lambda #1 . \: #2}\xspace}
\newcommand{\dep}[3]{\ensuremath{(#1 : #2) \to #3}\xspace}
\newcommand{\depq}[4]{\ensuremath{(#1 \is{#2} #3) \to #4}\xspace}
\newcommand{\fst}[1]{\ensuremath{\textrm{fst} \: #1}\xspace}
\newcommand{\snd}[1]{\ensuremath{\textrm{snd} \: #1}\xspace}

% Atoms
\newcommand{\univ}{\ensuremath{\mathcal{U}}\xspace}
\newcommand{\Int}{\ensuremath{\mathbb{Z}}\xspace}
\newcommand{\Bool}{\ensuremath{\mathbb{B}}\xspace}
\newcommand{\1}{\ensuremath{\mathbf{1}}\xspace}
\newcommand{\mpair}[2]{\ensuremath{(#1, \, #2)}\xspace}
\newcommand{\apair}[2]{\ensuremath{\langle #1, \, #2\rangle}\xspace}
\newcommand{\munit}{\ensuremath{( \, )}\xspace}
\newcommand{\aunit}{\ensuremath{\langle \, \rangle}\xspace}
\newcommand{\letp}[4]{\ensuremath{\textrm{let} \: \mpair {#1} {#2} = #3 \:%
 \textrm{in} \: #4}\xspace}
\newcommand{\letu}[2]{\ensuremath{\textrm{let} \: \munit \: \textrm{=} \: #1 \:%
 \textrm{in} \: #2}\xspace}
\newcommand{\letoc}[3]{\ensuremath{\textrm{let} \: \oc{#1} \: \textrm{=} \:%
 #2 \: \textrm{in} \: #3}\xspace}

\newcommand{\todo}[1]{\textcolor{red}{#1}} % TODO: remove

